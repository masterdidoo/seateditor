<!DOCTYPE html>
<html>
<head>
    <meta content="text/html" charset="utf-8">
    <link rel="stylesheet" href="css/bootstrap.css" media="screen">
    <!--<link rel="stylesheet" href="css/bootstrap-responsive.css">-->
    <link rel="stylesheet" href="js/themes/base/jquery-ui.css"/>
    <link rel="stylesheet" href="css/app.css">

    <script type="text/javascript" src="js/jquery-1.8.3.js"></script>

    <script src="js/ui/jquery.ui.core.js"></script>
    <script src="js/ui/jquery.ui.widget.js"></script>
    <script src="js/ui/jquery.ui.mouse.js"></script>
    <script src="js/ui/jquery.ui.draggable.js"></script>
    <script src="js/ui/jquery.ui.resizable.js"></script>
    <script src="js/ui/jquery.ui.rotatable.js"></script>

    <!--<script src="http://maps.googleapis.com/maps/api/js?libraries=geometry&sensor=false"></script>-->
    <!--<script src="js/OpenLayers.debug.js"></script>-->
    <!--<script src="js/spatial_query.js"></script>-->
    <script src="js/clipper_unminified.js"></script>

    <style id="style">
    </style>

    <script type="text/javascript" src="js/editors/editor-sector.js"></script>
    <script type="text/javascript" src="js/editors/editor-area.js"></script>
    <script type="text/javascript">
        var test = {"id": 1, "name": "Большой зал", "top": 129, "left": 368, "height": 20, "width": 110, "sectors": [
            {"name": "Сектор 1", "top": 81, "left": 424, "placeRows": [
                {"name": "1", "places": [
                    {"name": 1, "pos": 1},
                    {"name": 2, "pos": 2},
                    {"name": 3, "pos": 3},
                    {"name": 4, "pos": 4},
                    {"name": 5, "pos": 5},
                    {"name": 6, "pos": 6},
                    {"name": 7, "pos": 7},
                    {"name": 8, "pos": 8}
                ], "pos": 1},
                {"name": "2", "places": [
                    {"name": 1, "pos": 1},
                    {"name": 2, "pos": 2},
                    {"name": 3, "pos": 3},
                    {"name": 4, "pos": 4},
                    {"name": 5, "pos": 5},
                    {"name": 6, "pos": 6},
                    {"name": 7, "pos": 7},
                    {"name": 8, "pos": 8}
                ], "pos": 2},
                {"name": "3", "places": [
                    {"name": 1, "pos": 1},
                    {"name": 2, "pos": 2},
                    {"name": 3, "pos": 3},
                    {"name": 4, "pos": 4},
                    {"name": 5, "pos": 5},
                    {"name": 6, "pos": 6},
                    {"name": 7, "pos": 7},
                    {"name": 8, "pos": 8}
                ], "pos": 3},
                {"name": "4", "places": [
                    {"name": 1, "pos": 1},
                    {"name": 2, "pos": 2},
                    {"name": 3, "pos": 3},
                    {"name": 4, "pos": 4},
                    {"name": 5, "pos": 5},
                    {"name": 6, "pos": 6},
                    {"name": 7, "pos": 7},
                    {"name": 8, "pos": 8}
                ], "pos": 4}
            ]},
            {"name": "Сектор 2", "top": 29, "left": 425, "placeRows": [
                {"name": "1", "places": [
                    {"name": "1", "pos": 0},
                    {"name": "2", "pos": 1},
                    {"name": "3", "pos": 2},
                    {"name": "4", "pos": 3}
                ], "pos": 0},
                {"name": "2", "places": [
                    {"name": "1", "pos": 0},
                    {"name": "2", "pos": 1},
                    {"name": "3", "pos": 2},
                    {"name": "4", "pos": 3}
                ], "pos": 1}
            ]},
            {"name": "Сектор 3", "top": 75, "left": 330, "rotate": -30, "placeRows": [
                {"name": "1", "places": [
                    {"name": "1", "pos": 0},
                    {"name": "2", "pos": 1},
                    {"name": "3", "pos": 2},
                    {"name": "4", "pos": 3}
                ], "pos": 0},
                {"name": "2", "shift": -1, "places": [
                    {"name": "2", "pos": 1},
                    {"name": "3", "pos": 2},
                    {"name": "4", "pos": 3}
                ], "pos": 1}
            ]},
            {"name": "Сектор 4", "top": 77, "left": 520, "rotate": 30, "placeRows": [
                {"name": "1", "places": [
                    {"name": "1", "pos": 0},
                    {"name": "2", "pos": 1},
                    {"name": "3", "pos": 2},
                    {"name": "4", "pos": 3}
                ], "pos": 0},
                {"name": "2", "shift": 1, "places": [
                    {"name": "1", "pos": 0},
                    {"name": "2", "pos": 1},
                    {"name": "3", "pos": 2}
                ], "pos": 1}
            ]}
        ]};
        $(function () {
                    App.sectorEditor.init($("#editor-sector"));
                    App.areaEditor.init($("#ae-editor-area"));
                    App.areaEditor.load(test);
                }
        );
    </script>
    <script>
        function myFunction() {
            $.ajax({
                type: 'POST',
                dataType: 'json',
                data: JSON.stringify(test),
                contentType: "application/json; charset=utf-8",
                url: '/spring/json/area',
                success: function (data) {
                    alert(data);
                }
            });
        }
    </script>
</head>
<body>

<div class="navbar">
    <div class="navbar-inner">
        <a class="brand" href="./">АРМ Управления</a>
        <ul class="nav">
            <li>
                <a href="#">Площадки</a>
            </li>
        </ul>
    </div>
</div>

<div class="container-fluid">

    <div class="row-fluid">
        <div class="span12" id="ae-rez">
        </div>
    </div>
    <div class="row-fluid">
        <div class="editor-area" id="ae-editor-area">
            <div class="row-fluid">
                <div class="span10 offset1" style="padding-bottom: 10px">
                    <label class="form-inline">
                        Название площадки:
                        <input id="ae-name-form" type="text" class="input-xxlarge">
                    </label>

                    <div calss="nav-bar-inner">
                        <ul id="ae-sectors-list" class="nav nav-list">
                        </ul>
                    </div>

                    <div class="form-inline">
                        <button id="ae-add-sector" type="submit" class="btn" title="Добавить новый сектор">
                            <i class="icon-plus"></i> Добавить сектор
                        </button>
                        <label class="checkbox" title="Включить/выключить отображение названия секторов на схеме">
                            <input id="ae-show-sector-title" type="checkbox" checked> Названия секторов
                        </label>

                        <div class="btn-group">
                            <button class="btn" id="ae-zoom-in"><i class="icon-zoom-in"></i></button>
                            <button class="btn" id="ae-zoom-0"><i class="icon-resize-horizontal"></i></button>
                            <button class="btn" id="ae-zoom-out"><i class="icon-zoom-out"></i></button>
                        </div>

                        <div class="pull-right">
                            <button id="ae-area-save" type="submit" class="btn btn-primary"
                                    title="Сохранить схему площадки">
                                <i class="icon-white icon-ok"></i> Сохранить
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row-fluid">
                <div id="ae-area-view">
                    <div style="border: 1px #000 solid; overflow: scroll; width: 100%; height: 100%">
                        <div id="ae-sectors-holder"
                             style="position: relative; height: 100%; width: 100%">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row-fluid">
        <div class="span12 editor-sector" id="editor-sector" style="display: none">
        </div>
    </div>

    <div class="row-fluid">
        <div class="span12" id="svg">
        </div>
    </div>
    <div class="row-fluid">
        <div class="span12" id="svgarea">
        </div>
    </div>


</div>

<!--<script type="text/javascript">-->
    <!--var points = [-->
        <!--[0, 0],-->
        <!--[0, 10],-->
        <!--[10, 10],-->
        <!--[10, 0]-->
    <!--];-->
    <!--var points2 = [-->
        <!--[10, 0],-->
        <!--[10, 10],-->
        <!--[20, 10],-->
        <!--[20, 0]-->
    <!--];-->
    <!--var points3 = [-->
        <!--[0, 0],-->
        <!--[0, 10],-->
        <!--[10, 10],-->
        <!--[10, 0],-->
        <!--[10, 0],-->
        <!--[10, 10],-->
        <!--[20, 10],-->
        <!--[20, 0]-->
    <!--];-->
    <!--function newRing(a) {-->
        <!--var olPoints = [];-->
        <!--a.forEach(function(p){-->
            <!--olPoints.push(new OpenLayers.Geometry.Point(p[0],p[1]))-->
        <!--})  ;-->
        <!--return new OpenLayers.Geometry.LinearRing(olPoints);-->
<!--//        return new OpenLayers.Geometry.Polygon(ring);-->
    <!--}-->
    <!--function newPoint(x,y) {-->
            <!--return new OpenLayers.Geometry.Point(x,y);-->
    <!--}-->

    <!--function newPolygon(a) {-->
        <!--return new OpenLayers.Geometry.Polygon(newRing(a));-->
    <!--}-->
<!--</script>-->

</body>
</html>
